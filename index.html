<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dusun-English Catch Game</title>
<style>
    body {
        margin: 0;
        background: #e8f7ff;
        overflow: hidden;
        font-family: 'Segoe UI', sans-serif;
    }
    #container {
        position: relative;
        width: 100%;
        height: 100vh;
        background: linear-gradient(#b3e5fc, #e1f5fe);
        overflow: hidden;
    }
    #basket {
        position: absolute;
        bottom: 20px;
        width: 120px;
        height: 80px;
        background: url('https://i.imgur.com/Bn7L4DY.png') no-repeat center/contain;
    }
    .word {
        position: absolute;
        font-size: 22px;
        background: #fff;
        padding: 5px 10px;
        border-radius: 6px;
        box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        user-select: none;
    }
    .monster {
        position: absolute;
        width: 60px;
        height: 60px;
        background: url('https://i.imgur.com/xH5HbfG.png') no-repeat center/contain;
        opacity: 0.8;
    }
    #scoreboard {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 20px;
        background: rgba(255,255,255,0.7);
        padding: 8px 12px;
        border-radius: 8px;
    }
    #levelDisplay {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 20px;
        background: rgba(255,255,255,0.7);
        padding: 8px 12px;
        border-radius: 8px;
    }
    #gameOverScreen, #winScreen {
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: rgba(0,0,0,0.8);
        color: #fff;
        font-size: 30px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 20;
    }
    .hidden {display: none;}
    #rainEffect {
        display: none;
        position: absolute;
        top: 0; left: 0;
        width: 100%; height: 100%;
        background: url('https://i.imgur.com/KJYmBAy.gif') repeat;
        opacity: 0.3;
        pointer-events: none;
        z-index: 5;
    }
    .screen-shake {
        animation: shake 0.5s;
    }
    @keyframes shake {
        0% {transform: translate(5px, 5px);}
        25% {transform: translate(-5px, -5px);}
        50% {transform: translate(5px, -5px);}
        75% {transform: translate(-5px, 5px);}
        100% {transform: translate(0,0);}
    }
    .confetti {
        position: absolute;
        width: 10px;
        height: 10px;
        background: red;
        animation: fall 5s linear;
    }
    @keyframes fall {
        0% {transform: translateY(-50px);}
        100% {transform: translateY(100vh);}
    }
</style>
</head>
<body>
<div id="container">
    <div id="scoreboard">Score: 0</div>
    <div id="levelDisplay">Level: 1</div>
    <div id="basket"></div>
    <div id="rainEffect"></div>
    <div id="gameOverScreen" class="hidden">
        <div>Game Over!</div>
        <div id="finalScore"></div>
        <button onclick="restartGame()">Restart</button>
    </div>
    <div id="winScreen" class="hidden">
        <div>ðŸŽ‰ You Win! ðŸŽ‰</div>
        <div id="marksCollected"></div>
        <button onclick="restartGame()">Play Again</button>
    </div>
</div>

<!-- Sounds -->
<audio id="correctSound" src="https://freesound.org/data/previews/331/331912_3248244-lq.mp3"></audio>
<audio id="wrongSound" src="https://freesound.org/data/previews/514/514763_10226506-lq.mp3"></audio>
<audio id="monsterSound" src="https://freesound.org/data/previews/271/271151_5121236-lq.mp3"></audio>
<audio id="rainSound" src="https://freesound.org/data/previews/415/415209_5121236-lq.mp3" loop></audio>
<audio id="winSound" src="https://freesound.org/data/previews/426/426927_5121236-lq.mp3"></audio>

<script>
const container = document.getElementById('container');
const basket = document.getElementById('basket');
const scoreboard = document.getElementById('scoreboard');
const levelDisplay = document.getElementById('levelDisplay');
const gameOverScreen = document.getElementById('gameOverScreen');
const winScreen = document.getElementById('winScreen');
const finalScoreDisplay = document.getElementById('finalScore');
const marksCollectedDisplay = document.getElementById('marksCollected');
const rainEffect = document.getElementById('rainEffect');

const correctSound = document.getElementById('correctSound');
const wrongSound = document.getElementById('wrongSound');
const monsterSound = document.getElementById('monsterSound');
const rainSound = document.getElementById('rainSound');
const winSound = document.getElementById('winSound');

let words = [
    ["Rambutan","Rangalau"],["House","Walai"],["Cat","Tungau"],["Dog","Tasu"],
    ["Chicken","Manuk"],["Tree","Puun"],["Night","Totuong"],["Water","Waig"],
    ["Beautiful","Olumis"],["White","Opurak"],["Mouth","Kabang"],["Red","Aragang"],
    ["Angry","Otogod"],["Book","Buuk"],["School","Sikul"],["Friend","Tambalut"],
    ["Food","Takanon"],["Rice","Takano"],["Fish","Sada"],["Elder","Molohing"]
];
let wrongWords = ["Car","Banana","Laptop","Phone","Tiger","Chair","Bottle","Sun","Moon","Cloud"];

let score = 0;
let level = 1;
let speed = 2;
let gameActive = true;
let wordInterval;
let distractionInterval;
let basketX = window.innerWidth / 2 - 60;

basket.style.left = basketX + "px";

document.addEventListener('keydown', e => {
    if (!gameActive) return;
    if (e.key === 'ArrowLeft') basketX -= 40;
    if (e.key === 'ArrowRight') basketX += 40;
    basketX = Math.max(0, Math.min(window.innerWidth - 120, basketX));
    basket.style.left = basketX + "px";
});

function spawnWord(){
    const isCorrect = Math.random() < 0.67;
    const pair = words[Math.floor(Math.random()*words.length)];
    const text = isCorrect
        ? pair[0] + " / " + pair[1]
        : wrongWords[Math.floor(Math.random()*wrongWords.length)];
    const w = document.createElement('div');
    w.className = "word";
    w.textContent = text;
    w.dataset.correct = isCorrect;
    w.style.left = Math.random() * (window.innerWidth - 100) + "px";
    w.style.top = "0px";
    container.appendChild(w);

    let fall = setInterval(()=>{
        if(!gameActive){clearInterval(fall); w.remove(); return;}
        let y = parseInt(w.style.top) + speed;
        w.style.top = y + "px";
        let bRect = basket.getBoundingClientRect();
        let wRect = w.getBoundingClientRect();
        if (wRect.bottom >= bRect.top &&
            wRect.left < bRect.right &&
            wRect.right > bRect.left) {
            if(w.dataset.correct === "true"){
                score += 10;
                correctSound.play();
            } else {
                score -= 5;
                wrongSound.play();
            }
            scoreboard.textContent = "Score: " + score;
            w.remove();
            clearInterval(fall);
            checkLevel();
        } else if (y > window.innerHeight) {
            w.remove();
            clearInterval(fall);
        }
    },20);
}

function startGame(){
    wordInterval = setInterval(spawnWord, 1500);
}

function checkLevel(){
    if(score >= level * 50 && level < 5){
        level++;
        levelDisplay.textContent = "Level: " + level;
        speed += 1;
        levelUpEffects();
        if(level === 3) startDistractions();
        if(level === 5) winGame();
    }
}

function levelUpEffects(){
    container.style.boxShadow = "0 0 30px #ffdd59";
    setTimeout(()=>container.style.boxShadow = "0 10px 30px rgba(0,0,0,0.2)",800);
}

function startDistractions(){
    distractionInterval = setInterval(()=>{
        if(!gameActive) return;
        const monster = document.createElement('div');
        monster.className = "monster";
        monster.style.left = Math.random() * (window.innerWidth - 80) + "px";
        monster.style.top = Math.random() * (window.innerHeight - 160) + "px";
        container.appendChild(monster);
        monsterSound.currentTime = 0;
        monsterSound.play();
        setTimeout(()=>monster.remove(),4000);

        if(level >= 4){
            container.classList.add("screen-shake");
            setTimeout(()=>container.classList.remove("screen-shake"),500);
            if(Math.random()<0.5){
                rainEffect.style.display="block";
                rainSound.play();
                setTimeout(()=>{
                    rainEffect.style.display="none";
                    rainSound.pause();
                },2000);
            }
        }
    }, Math.max(3000 - level*400,1200));
}

function winGame(){
    gameActive = false;
    clearInterval(wordInterval);
    clearInterval(distractionInterval);
    winSound.play();
    marksCollectedDisplay.textContent = "Marks Collected: " + score;
    winScreen.classList.remove('hidden');

    for(let i=0;i<50;i++){
        const c = document.createElement("div");
        c.className = "confetti";
        c.style.left = Math.random()*window.innerWidth + "px";
        c.style.background = `hsl(${Math.random()*360},80%,60%)`;
        container.appendChild(c);
        setTimeout(()=>c.remove(),5000);
    }
}

function gameOver(){
    gameActive = false;
    clearInterval(wordInterval);
    clearInterval(distractionInterval);
    finalScoreDisplay.textContent = "Final Score: " + score;
    gameOverScreen.classList.remove('hidden');
}

function restartGame(){
    window.location.reload();
}

startGame();
</script>
</body>
</html>
